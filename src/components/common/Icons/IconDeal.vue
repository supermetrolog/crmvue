<template>
    <div class="icon-deal">
        <div class="icon-deal__inner" :class="{ ready: isReady }">
            <VueVivus ref="vivus" v-slot="{ uid }" @ready="onReady" auto-play once :duration="400">
                <svg
                    :id="uid"
                    width="150px"
                    height="150px"
                    viewBox="0 0 39 34"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    color="#48c78e"
                >
                    <path
                        data-ignore="true"
                        d="M4.75244 21.8631C6.81064 28.3219 12.859 33 20 33C28.7134 33 35.7999 26.0349 35.9958 17.3686M30.1301 4.61464C27.3713 2.35552 23.8439 1 20 1C14.4 1 9.47193 3.87696 6.6132 8.23349"
                        stroke="currentColor"
                    />
                    <path
                        d="M24.9188 28.9509C24.4403 29.1659 23.9438 29.3527 23.4429 29.5063C23.0156 29.6374 22.7754 30.09 22.9064 30.5174C23.0131 30.8657 23.3335 31.0896 23.68 31.0896C23.7585 31.0896 23.8385 31.0781 23.9175 31.0539C24.4824 30.8807 25.0424 30.6699 25.5822 30.4274C25.9899 30.2441 26.172 29.7651 25.9887 29.3574C25.8055 28.9498 25.3264 28.7678 24.9188 28.9509Z"
                        fill="currentColor"
                    />
                    <path
                        d="M16.8797 4.86618C16.9357 4.86618 16.9926 4.86039 17.0494 4.8482C17.5613 4.73893 18.0861 4.66082 18.6091 4.61579C19.0545 4.57746 19.3844 4.1854 19.3461 3.74C19.3077 3.29468 18.9162 2.96496 18.4704 3.00298C17.8807 3.05373 17.2889 3.14198 16.7116 3.26512C16.2745 3.35839 15.9958 3.78839 16.089 4.22556C16.1702 4.6058 16.506 4.86618 16.8797 4.86618Z"
                        fill="currentColor"
                    />
                    <path
                        d="M22.3478 4.84232C22.861 4.9506 23.3725 5.09242 23.8681 5.26379C23.9558 5.29412 24.045 5.30845 24.1328 5.30845C24.4682 5.30845 24.7819 5.09821 24.8976 4.76345C25.0437 4.34099 24.8197 3.88013 24.3972 3.73405C23.838 3.54058 23.261 3.38071 22.6819 3.25848C22.2442 3.16612 21.8152 3.44601 21.7229 3.88333C21.6306 4.32057 21.9104 4.74997 22.3478 4.84232Z"
                        fill="currentColor"
                    />
                    <path
                        d="M11.7392 7.16777C11.9046 7.16777 12.0716 7.11718 12.2156 7.01225C12.6394 6.70295 13.0867 6.41704 13.5446 6.16268C13.9354 5.94558 14.0762 5.45286 13.8591 5.0621C13.642 4.67134 13.1494 4.53045 12.7585 4.74762C12.2425 5.03421 11.7388 5.35624 11.2613 5.70456C10.9003 5.96798 10.8211 6.47434 11.0845 6.83546C11.2431 7.05263 11.4894 7.16777 11.7392 7.16777Z"
                        fill="currentColor"
                    />
                    <path
                        d="M19.7425 30.0629C19.7413 30.0629 19.7403 30.0629 19.7391 30.0629H19.7127C19.1865 30.0629 18.6566 30.0304 18.1376 29.9662C17.6938 29.911 17.2899 30.2265 17.2351 30.6701C17.1802 31.1136 17.4954 31.5178 17.939 31.5726C18.5236 31.6448 19.1204 31.6816 19.7126 31.6816H19.7455C20.1925 31.6798 20.5534 31.3159 20.5517 30.8689C20.5499 30.4231 20.188 30.0629 19.7425 30.0629Z"
                        fill="currentColor"
                    />
                    <path
                        d="M14.5318 28.9623C14.0532 28.7486 13.5829 28.5024 13.1338 28.2305C12.7513 27.9991 12.2538 28.1214 12.0223 28.5038C11.7909 28.8863 11.9133 29.3839 12.2957 29.6153C12.8019 29.9217 13.3322 30.1992 13.8716 30.4402C13.9789 30.4881 14.091 30.5107 14.2013 30.5107C14.5109 30.5107 14.8063 30.3321 14.9407 30.0313C15.123 29.6233 14.9399 29.1446 14.5318 28.9623Z"
                        fill="currentColor"
                    />
                    <path
                        d="M32.8638 20.7111C32.4385 20.5735 31.9822 20.8067 31.8445 21.2319C31.6832 21.7306 31.4887 22.2245 31.2662 22.6999C31.0767 23.1047 31.2514 23.5865 31.6562 23.776C31.7671 23.8279 31.8838 23.8525 31.9986 23.8525C32.3031 23.8525 32.5947 23.68 32.7322 23.386C32.9831 22.8499 33.2026 22.2929 33.3846 21.7304C33.5223 21.3051 33.2891 20.8488 32.8638 20.7111Z"
                        fill="currentColor"
                    />
                    <path
                        d="M9.26292 24.6084C9.00651 24.2423 8.5019 24.1533 8.13575 24.4095C7.76961 24.6659 7.6806 25.1706 7.93687 25.5367C8.27551 26.0203 8.64783 26.488 9.04354 26.9269C9.20341 27.1042 9.42363 27.1942 9.64485 27.1942C9.83802 27.1942 10.0319 27.1254 10.1866 26.9859C10.5186 26.6866 10.545 26.1749 10.2456 25.8429C9.89433 25.4533 9.56361 25.0378 9.26292 24.6084Z"
                        fill="currentColor"
                    />
                    <path
                        d="M30.3403 25.7615C30.0078 25.463 29.4961 25.4904 29.1974 25.823C28.8469 26.2134 28.4686 26.5861 28.0728 26.9306C27.7357 27.2242 27.7004 27.7355 27.9939 28.0725C28.1539 28.2563 28.3787 28.3503 28.6046 28.3503C28.7931 28.3503 28.9825 28.2849 29.1358 28.1514C29.5813 27.7634 30.0073 27.3438 30.4019 26.9044C30.7004 26.5717 30.6728 26.0601 30.3403 25.7615Z"
                        fill="currentColor"
                    />
                    <rect
                        x="4.14542"
                        y="7.60058"
                        width="4.63477"
                        height="13.6504"
                        rx="0.5"
                        transform="rotate(15 4.14542 7.60058)"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    />
                    <path
                        d="M8.6063 10.4307C12.6226 11.5782 12.6226 10.4307 14.9176 11.0045L27.5401 14.447C30.9826 15.5945 28.6876 18.4632 26.9663 17.8895M26.9663 17.8895L20.6551 16.1682M26.9663 17.8895C30.4088 19.037 28.6876 21.9057 26.9663 21.332M26.9663 21.332L19.5076 19.037M26.9663 21.332C28.6876 21.9057 28.1138 24.7745 25.8188 24.2007M25.8188 24.2007L17.7863 21.9057M25.8188 24.2007C26.9663 25.3482 25.8188 27.6432 22.9501 26.4957L10.9013 23.0532C8.6063 22.4795 10.3276 21.9057 5.73755 20.7582"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    />
                    <rect
                        x="27.0755"
                        y="6.73367"
                        width="5.00987"
                        height="13.8055"
                        rx="0.5"
                        transform="rotate(-30 27.0755 6.73367)"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    />
                    <path
                        d="M27.5401 8.13568C26.3926 9.28319 25.2451 10.4307 21.8026 9.28319L17.2126 8.13569C14.9176 7.56193 14.9176 11.0044 17.2126 11.5782L27.5401 14.4469C30.4089 15.0207 29.8351 18.4632 26.9664 17.8895C29.108 18.8431 28.7646 19.5549 29.8351 19.037C30.9056 18.5191 33 17.5 33 17.5"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    />
                </svg>
            </VueVivus>
        </div>
        <div class="icon-document-done__back"></div>
    </div>
</template>
<script setup>
import VueVivus from '@/components/common/VueVivus.vue';
import { ref, shallowRef } from 'vue';

const emit = defineEmits(['ready']);
defineProps({
    size: {
        type: Number,
        default: 100
    }
});

const isReady = shallowRef(false);
const vivus = ref(null);

defineExpose({ play: () => vivus.value.play() });

const onReady = () => {
    isReady.value = true;
    emit('ready');
};
</script>
